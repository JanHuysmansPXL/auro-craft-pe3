{% extends '_index' %}

{% block content %}

{% set productImage = entry.productImage.one() %}
{% set categories = entry.productCategories.all() %}

{% set productContent = entry.productContent.all() %}

  <h1 class="txt-white txt-heading_md">{{ entry.headingTitle }}</h1>
  <h1 class="txt-white txt-subheader">{{ entry.headingSubtitle }}</h1>

  <time class="txt-white txt-heading_md"  datetime="{{ entry.postDate | atom }}">
    {{ entry.postDate | date }}
  </time>

  {% if categories | length %}
    <ul class="categories link">
      {% for category in categories %}
        <li class="txt-white txt-heading_md" >{{ category.getLink() }}</li>
      {% endfor %}
    </ul>
  {% endif %}

  <div class="container-fluid">
      <div class="card">
          <div class="card-overlay">
              <h1 class="card-overlay-heading txt-light">{{ entry.title }}</h1>
              <p class="card-overlay-paragraph txt-light">{{ entry.productDescription }}</p>
              <a type="button" class="card-overlay-button" href="product_detail.html">Order now</a>
          </div>
            {# Output the image, if one was found: #}
            {% if productImage %}
                  <img class="card-image" src={{ productImage.url }} alt= {{ productImage.title }}>
            {% endif %}
      </div>       
  </div>


  <!-- MATRIX BLOCK HANDLING - +1 EXTRA IMAGE OR +1 EXTRA DESCRIPTION-->

  <div class="product-content">

  {% for contentBlock in productContent %}
    {# Memoize the block type’s handle so we can use it later: #}
    {% set blockType = contentBlock.type.handle %}

    {# Switch what is displayed based on the `type`: #}
    {% if blockType == 'descriptionExtra' %}
      <div class="content-block text-light txt_body_xl ">
        {{ contentBlock.descriptionLarge | md }}
      </div>
    {% elseif blockType == 'imageExtra' %}
      {% set image = contentBlock.productImage.one() %}

      <div class="content-block imageExtra">
        {{ image.getImg() }}
      </div>
    {% else %}
      <div class="content-block unsupported">
        <p>Unsupported block type: <code>{{ blockType }}</code></p>
      </div>
    {% endif %}
  {% else %}
    {# `for` tags also support an `else` block for when there’s no content! #}
    <div class="content-block empty">
      <p>This post has no content!</p>
    </div>
  {% endfor %}
</div>

{% endblock %}

